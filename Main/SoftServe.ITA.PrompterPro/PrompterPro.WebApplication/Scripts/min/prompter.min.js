app.controller("prompterController",["$scope","prompterService",function(e,t){$("div.container.body-content").removeClass("container body-content").addClass("container-full");var n="rgb(0, 0, 0)";$("body").css("background-color",n).keyup(function(e){var t=e.keyCode?e.keyCode:e.which;122===t&&$("div.navbar.navbar-inverseNew.navbar-fixed-top").toggleClass("ng-hide")}),e.service=t(e)}]),app.factory("prompterRepository",["$http",function(e){var t={};return t.get=function(t,n){var c="api/script/"+String(t);e.get(c).success(function(e){n(e)})},t}]),app.service("prompterService",["broadcastHub","prompterRepository","constants","notify","notifyType","icons","prompterResolution",function(e,t,n,c,o,r,i){return function(a){function l(){a.isMirroredX=void 0,a.isMorroredY=void 0,a.speed=1,a.leftPadding=0,a.rightPadding=0,a.textSize=90,e.client.stop()}var s,p=$("#area"),d=10,u=1,f=15,g=1;a.textIsChanged=!1,a.textSizes=[50,55,60,70,80,90,100,110,130],a.showDialog=!1,a.speed=1,a.currentSize=a.textSizes[2],a.textSize=90,a.leftPadding=0,a.rightPadding=0,a.hub=e,e.client.fetchScript=function(i,l){t.get(i,function(t){a.script=t,e.server.fetchSuccess(l),c(o.success,n.connectedToOperator,r.ok),a.$apply()})},e.client.operatorConnected=function(){c(o.success,n.allConnected,r.ok),a.$apply()},e.client.broadcastEnd=function(){c(o.success,n.broadcastEnd,r.warning),a.script=null,l(),a.$apply()},e.client.operatorDisconnected=function(){c(o.danger,n.operatorDisconnected,r.warning),a.script=null,l(),a.$apply()},e.client.play=function(){s=setInterval(function(){p.scrollTop()<=p.get(0).scrollHeight&&p.scrollTop(p.scrollTop()+a.speed)},f)},e.client.pause=function(){clearInterval(s)},e.client.stop=function(){clearInterval(s),p.scrollTop(0)},e.client.changeTextSize=function(e){a.textSize=e,a.$apply()},e.client.speedUp=function(){a.speed<d&&a.speed++},e.client.speedDown=function(){a.speed>u&&a.speed--},e.client.mirrorText=function(e,t){e&&t&&p.css({transform:"matrix(-1, 0, 0, -1, 0, 0)"}),e&&!t&&p.css({transform:"matrix(-1, 0, 0, 1, 0, 0)"}),!e&&t&&p.css({transform:"matrix(1, 0, 0, -1, 0, 0)"}),e||t||p.css({transform:"matrix(1, 0, 0, 1, 0, 0)"})},e.client.handPlayBack=function(){e.client.pause(),s=setInterval(function(){p.scrollTop()>0&&p.scrollTop(p.scrollTop()-a.speed)},f)},e.client.handPlay=function(){e.client.pause(),s=setInterval(function(){p.scrollTop()<=p.get(0).scrollHeight&&p.scrollTop(p.scrollTop()+a.speed)},f)},e.client.clearText=function(){document.getElementById("area").value=""},a.displayText=function(){var e="\n\n",t=a.script.Sections;return _.each(t,function(t){e+="[Section:"+t.Order+"]\n"+t.Text+"\n"}),e},e.client.padLeft=function(e){a.leftPadding=e,a.$apply()},e.client.padRight=function(e){a.rightPadding=e,a.$apply()},e.client.setResolution=function(t){t==i.Small&&(document.getElementById("area").width=600,g=1,e.client.changeTextSize(a.currentSize*g)),t==i.Medium&&(document.getElementById("area").width=800,g=1.5,e.client.changeTextSize(a.currentSize*g)),t==i.Large&&(document.getElementById("area").width=1200,g=2,e.client.changeTextSize(a.currentSize*g))};var v={};return v}}]);